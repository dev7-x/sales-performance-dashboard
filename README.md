# Sales Performance Dashboard (E-commerce)

## Overview
This project is a comprehensive sales performance dashboard for e-commerce, featuring:
- Synthetic data generation for sales and product catalog
- ETL pipeline for daily sales aggregation and KPI computation
- Anomaly detection for sudden drops in sales
- Alerting system for detected anomalies
- Interactive analytics dashboard (Streamlit)
- REST API for triggering anomaly checks (Flask)

## Project Structure
```
├── data/                  # Generated and processed data files
│   ├── orders.csv         # Raw simulated order data
│   ├── catalog.csv        # Product catalog
│   ├── daily_agg.csv      # Aggregated daily sales
│   ├── daily_metrics.csv  # Rolling KPIs and metrics
│   ├── alerts.csv         # Alerts for detected anomalies
│   └── anomaly_alerts.csv # Alerts generated by anomaly detector
├── src/                   # Source code
│   ├── generate_sales_data.py  # Generates synthetic sales and catalog data
│   ├── etl.py                  # Aggregates raw orders into daily summaries
│   ├── metrics.py              # Computes rolling KPIs and metrics
│   ├── anomaly_detector.py     # Detects anomalies in sales data
│   ├── alert_service.py        # Handles alert persistence and notification
│   ├── app.py                  # Flask API to trigger anomaly checks and send alerts
│   └── streamlit_app.py        # Main dashboard UI
├── requirements.txt       # Python dependencies
├── README.md              # Project documentation
└── spd-venv/              # (Optional) Python virtual environment
```

## Features
- **Data Generation:** Simulates realistic e-commerce sales and catalog data for demo/testing.
- **ETL Pipeline:** Aggregates and computes daily sales KPIs (revenue, units sold, AOV, etc.).
- **Anomaly Detection:** Flags sudden drops in sales using robust statistics (median, MAD, percent drop).
- **Alerting:** Persists and displays alerts for detected anomalies.
- **Dashboard:** Interactive Streamlit app for exploring sales, KPIs, and alerts.
- **API:** Flask endpoint to trigger anomaly checks and alerting from the dashboard.

## Setup & Usage
### 1. Install Dependencies
```bash
pip install -r requirements.txt
```

### 2. Generate Synthetic Data
```bash
python src/generate_sales_data.py
```
This creates `orders.csv` and `catalog.csv` in the `data/` directory.

### 3. Run ETL Pipeline
```bash
python src/etl.py
python src/metrics.py
```
This produces `daily_agg.csv` and `daily_metrics.csv`.

### 4. Start the Flask API (for anomaly detection and alerting)
```bash
python src/app.py
```
The API will be available at `http://127.0.0.1:5100/`.

### 5. Start the Streamlit Dashboard
```bash
streamlit run src/streamlit_app.py
```
Open the provided local URL in your browser to access the dashboard.

### 6. Using the Dashboard
- View top KPIs, revenue trends, SKU performance, and region breakdowns.
- See recent alerts for detected anomalies.
- Click "Run anomaly check" to trigger anomaly detection (calls the Flask API).

## Data Files
- `orders.csv`: Raw simulated order data (order_id, date, sku, region, qty, price, revenue)
- `catalog.csv`: Product catalog (sku_id, category, price)
- `daily_agg.csv`: Aggregated daily sales (by sku, region, date)
- `daily_metrics.csv`: Rolling KPIs and metrics (7-day revenue, percent change, etc.)
- `alerts.csv`, `anomaly_alerts.csv`: Alerts for detected anomalies (sku, region, date, drop info)

## Source Code Details
- **generate_sales_data.py**: Creates synthetic sales and catalog data with realistic seasonality and anomalies.
- **etl.py**: Aggregates raw orders into daily summaries and computes KPIs.
- **metrics.py**: Computes rolling 7-day revenue and percent changes for anomaly detection.
- **anomaly_detector.py**: Flags large drops in sales using median/MAD and percent drop logic; outputs alerts.
- **alert_service.py**: Saves alerts to CSV and simulates notifications.
- **app.py**: Flask API to run anomaly checks and send alerts (used by dashboard).
- **streamlit_app.py**: Streamlit dashboard for interactive analytics and alert management.

## Dependencies
- pandas
- numpy
- streamlit
- flask
- plotly
- scikit-learn

## Notes
- All data is synthetic and for demonstration purposes only.
- The dashboard and API are designed for local/demo use.
- For best results, run the API and dashboard simultaneously.

---

<img width="1867" height="812" alt="image" src="https://github.com/user-attachments/assets/d069585f-bb38-49b2-bfd9-1599e30702ff" />
<img width="1872" height="513" alt="image" src="https://github.com/user-attachments/assets/da73af44-a7da-4695-b726-8d074db3fc93" />
<img width="1813" height="546" alt="image" src="https://github.com/user-attachments/assets/99cee8d1-d738-49d8-a9d8-bfde831b3941" />
